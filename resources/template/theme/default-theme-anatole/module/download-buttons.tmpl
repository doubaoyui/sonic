{{- define "caicai_anatole/module/download-buttons" -}}
    {{/* Allow both direct URL and attachment selection; attachment takes precedence. */}}
    {{$lang := or .lang .blog_locale}}
    {{$winURL := or .settings.landing_download_windows_attachment .settings.landing_download_windows_url}}
    {{$macURL := or .settings.landing_download_macos_attachment .settings.landing_download_macos_url}}
    {{$macArmURL := or .settings.landing_download_macos_arm_attachment .settings.landing_download_macos_arm_url}}
    {{$macIntelURL := or .settings.landing_download_macos_intel_attachment .settings.landing_download_macos_intel_url}}

    <div class="landing-actions">
        <a class="landing-btn landing-btn-primary{{if not $winURL}} landing-btn-disabled{{end}}"
           href="{{or $winURL "#"}}"
           {{if $winURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
            <span class="landing-btn-icon landing-btn-icon-os" aria-hidden="true">
                <svg height="16" width="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" focusable="false">
                    <path d="M7 1H1v6h6zm8 0H9v6h6zM7 9H1v6h6zm8 0H9v6h6z"></path>
                </svg>
            </span>
            {{$winText := .settings.landing_download_windows_text}}
            {{if eq $lang "en"}}
                {{if .settings.landing_download_windows_text_en}}{{$winText = .settings.landing_download_windows_text_en}}{{end}}
            {{else}}
                {{if .settings.landing_download_windows_text_zh}}{{$winText = .settings.landing_download_windows_text_zh}}{{end}}
            {{end}}
            {{or $winText (t $lang "landing.download_windows" "下载 Windows")}}
            <span class="landing-btn-icon landing-btn-icon-download" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3v12"></path>
                    <path d="m7 11 5 5 5-5"></path>
                    <path d="M5 21h14"></path>
                </svg>
            </span>
        </a>

        {{/* Prefer new macOS split links when provided; fallback to legacy macOS single link. */}}
        {{if or $macArmURL $macIntelURL}}
            <a class="landing-btn landing-btn-primary{{if not $macArmURL}} landing-btn-disabled{{end}}"
               href="{{or $macArmURL "#"}}"
               {{if $macArmURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
                <span class="landing-btn-icon landing-btn-icon-os" aria-hidden="true">
                    <svg width="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" class="opacity-80 size-3">
                        <path d="M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.091-4.61 1.091M15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"></path>
                    </svg>
                </span>
                {{$macArmText := .settings.landing_download_macos_arm_text}}
                {{if eq $lang "en"}}
                    {{if .settings.landing_download_macos_arm_text_en}}{{$macArmText = .settings.landing_download_macos_arm_text_en}}{{end}}
                {{else}}
                    {{if .settings.landing_download_macos_arm_text_zh}}{{$macArmText = .settings.landing_download_macos_arm_text_zh}}{{end}}
                {{end}}
                {{or $macArmText (t $lang "landing.download_macos_arm" "下载 macOS (Apple Silicon)")}}
                <span class="landing-btn-icon landing-btn-icon-download" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3v12"></path>
                        <path d="m7 11 5 5 5-5"></path>
                        <path d="M5 21h14"></path>
                    </svg>
                </span>
            </a>
            <a class="landing-btn landing-btn-primary{{if not $macIntelURL}} landing-btn-disabled{{end}}"
               href="{{or $macIntelURL "#"}}"
               {{if $macIntelURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
                <span class="landing-btn-icon landing-btn-icon-os" aria-hidden="true">
                    <svg width="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" class="opacity-80 size-3">
                        <path d="M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.091-4.61 1.091M15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"></path>
                    </svg>
                </span>
                {{$macIntelText := .settings.landing_download_macos_intel_text}}
                {{if eq $lang "en"}}
                    {{if .settings.landing_download_macos_intel_text_en}}{{$macIntelText = .settings.landing_download_macos_intel_text_en}}{{end}}
                {{else}}
                    {{if .settings.landing_download_macos_intel_text_zh}}{{$macIntelText = .settings.landing_download_macos_intel_text_zh}}{{end}}
                {{end}}
                {{or $macIntelText (t $lang "landing.download_macos_intel" "下载 macOS (Intel)")}}
                <span class="landing-btn-icon landing-btn-icon-download" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3v12"></path>
                        <path d="m7 11 5 5 5-5"></path>
                        <path d="M5 21h14"></path>
                    </svg>
                </span>
            </a>
        {{else}}
            <a class="landing-btn landing-btn-primary{{if not $macURL}} landing-btn-disabled{{end}}"
               href="{{or $macURL "#"}}"
               {{if $macURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
                <span class="landing-btn-icon landing-btn-icon-os" aria-hidden="true">
                    <svg width="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" class="opacity-80 size-3">
                        <path d="M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.091-4.61 1.091M15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"></path>
                    </svg>
                </span>
                {{$macText := .settings.landing_download_macos_text}}
                {{if eq $lang "en"}}
                    {{if .settings.landing_download_macos_text_en}}{{$macText = .settings.landing_download_macos_text_en}}{{end}}
                {{else}}
                    {{if .settings.landing_download_macos_text_zh}}{{$macText = .settings.landing_download_macos_text_zh}}{{end}}
                {{end}}
                {{or $macText (t $lang "landing.download_macos" "下载 macOS")}}
                <span class="landing-btn-icon landing-btn-icon-download" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3v12"></path>
                        <path d="m7 11 5 5 5-5"></path>
                        <path d="M5 21h14"></path>
                    </svg>
                </span>
            </a>
        {{end}}
    </div>
{{- end -}}
