{{- define "caicai_anatole/module/download-buttons" -}}
    {{/* Allow both direct URL and attachment selection; attachment takes precedence. */}}
    {{$lang := or .lang .blog_locale}}
    {{$winURL := or .settings.landing_download_windows_attachment .settings.landing_download_windows_url}}
    {{$macURL := or .settings.landing_download_macos_attachment .settings.landing_download_macos_url}}
    {{$macArmURL := or .settings.landing_download_macos_arm_attachment .settings.landing_download_macos_arm_url}}
    {{$macIntelURL := or .settings.landing_download_macos_intel_attachment .settings.landing_download_macos_intel_url}}

    <div class="landing-actions">
        <a class="landing-btn landing-btn-primary{{if not $winURL}} landing-btn-disabled{{end}}"
           href="{{or $winURL "#"}}"
           {{if $winURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
            <span class="landing-btn-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M3 5.5 11 4v7H3V5.5Zm0 13 8 1.5V13H3v5.5ZM13 3.5 21 2v9h-8V3.5Zm0 9.5h8v9l-8 1.5V13Z"></path>
                </svg>
            </span>
            {{$winText := .settings.landing_download_windows_text}}
            {{if eq $lang "en"}}
                {{if .settings.landing_download_windows_text_en}}{{$winText = .settings.landing_download_windows_text_en}}{{end}}
            {{else}}
                {{if .settings.landing_download_windows_text_zh}}{{$winText = .settings.landing_download_windows_text_zh}}{{end}}
            {{end}}
            {{or $winText (t $lang "landing.download_windows" "下载 Windows")}}
        </a>

        {{/* Prefer new macOS split links when provided; fallback to legacy macOS single link. */}}
        {{if or $macArmURL $macIntelURL}}
            <a class="landing-btn landing-btn-primary{{if not $macArmURL}} landing-btn-disabled{{end}}"
               href="{{or $macArmURL "#"}}"
               {{if $macArmURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
                <span class="landing-btn-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M16.5 2c-1.6.1-3.3 1.1-4.1 2.4-.8 1.2-1.5 3.1-1.2 4.7 1.7.1 3.4-.9 4.3-2.2.9-1.3 1.5-3.1 1-4.9Z"></path>
                        <path d="M20.7 17.2c-.7 1.6-1 2.3-1.9 3.7-1.3 2-3.1 4.6-5.4 4.6-2 0-2.6-1.3-5-1.3-2.3 0-3 1.3-5 1.4-2.3.1-4.1-2.3-5.4-4.3-3.1-4.9-3.4-10.6-1.5-13.6 1.3-2 3.3-3.2 5.5-3.2 2.1 0 3.4 1.4 5.1 1.4 1.6 0 2.5-1.4 5.1-1.4 1.9 0 3.9 1 5.2 2.8-4.5 2.5-3.8 8.8 1.3 10.5Z"></path>
                    </svg>
                </span>
                {{$macArmText := .settings.landing_download_macos_arm_text}}
                {{if eq $lang "en"}}
                    {{if .settings.landing_download_macos_arm_text_en}}{{$macArmText = .settings.landing_download_macos_arm_text_en}}{{end}}
                {{else}}
                    {{if .settings.landing_download_macos_arm_text_zh}}{{$macArmText = .settings.landing_download_macos_arm_text_zh}}{{end}}
                {{end}}
                {{or $macArmText (t $lang "landing.download_macos_arm" "下载 macOS (Apple Silicon)")}}
            </a>
            <a class="landing-btn landing-btn-primary{{if not $macIntelURL}} landing-btn-disabled{{end}}"
               href="{{or $macIntelURL "#"}}"
               {{if $macIntelURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
                <span class="landing-btn-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M16.5 2c-1.6.1-3.3 1.1-4.1 2.4-.8 1.2-1.5 3.1-1.2 4.7 1.7.1 3.4-.9 4.3-2.2.9-1.3 1.5-3.1 1-4.9Z"></path>
                        <path d="M20.7 17.2c-.7 1.6-1 2.3-1.9 3.7-1.3 2-3.1 4.6-5.4 4.6-2 0-2.6-1.3-5-1.3-2.3 0-3 1.3-5 1.4-2.3.1-4.1-2.3-5.4-4.3-3.1-4.9-3.4-10.6-1.5-13.6 1.3-2 3.3-3.2 5.5-3.2 2.1 0 3.4 1.4 5.1 1.4 1.6 0 2.5-1.4 5.1-1.4 1.9 0 3.9 1 5.2 2.8-4.5 2.5-3.8 8.8 1.3 10.5Z"></path>
                    </svg>
                </span>
                {{$macIntelText := .settings.landing_download_macos_intel_text}}
                {{if eq $lang "en"}}
                    {{if .settings.landing_download_macos_intel_text_en}}{{$macIntelText = .settings.landing_download_macos_intel_text_en}}{{end}}
                {{else}}
                    {{if .settings.landing_download_macos_intel_text_zh}}{{$macIntelText = .settings.landing_download_macos_intel_text_zh}}{{end}}
                {{end}}
                {{or $macIntelText (t $lang "landing.download_macos_intel" "下载 macOS (Intel)")}}
            </a>
        {{else}}
            <a class="landing-btn landing-btn-primary{{if not $macURL}} landing-btn-disabled{{end}}"
               href="{{or $macURL "#"}}"
               {{if $macURL}}target="_blank" rel="noopener"{{else}}aria-disabled="true" tabindex="-1"{{end}}>
                <span class="landing-btn-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M16.5 2c-1.6.1-3.3 1.1-4.1 2.4-.8 1.2-1.5 3.1-1.2 4.7 1.7.1 3.4-.9 4.3-2.2.9-1.3 1.5-3.1 1-4.9Z"></path>
                        <path d="M20.7 17.2c-.7 1.6-1 2.3-1.9 3.7-1.3 2-3.1 4.6-5.4 4.6-2 0-2.6-1.3-5-1.3-2.3 0-3 1.3-5 1.4-2.3.1-4.1-2.3-5.4-4.3-3.1-4.9-3.4-10.6-1.5-13.6 1.3-2 3.3-3.2 5.5-3.2 2.1 0 3.4 1.4 5.1 1.4 1.6 0 2.5-1.4 5.1-1.4 1.9 0 3.9 1 5.2 2.8-4.5 2.5-3.8 8.8 1.3 10.5Z"></path>
                    </svg>
                </span>
                {{$macText := .settings.landing_download_macos_text}}
                {{if eq $lang "en"}}
                    {{if .settings.landing_download_macos_text_en}}{{$macText = .settings.landing_download_macos_text_en}}{{end}}
                {{else}}
                    {{if .settings.landing_download_macos_text_zh}}{{$macText = .settings.landing_download_macos_text_zh}}{{end}}
                {{end}}
                {{or $macText (t $lang "landing.download_macos" "下载 macOS")}}
            </a>
        {{end}}
    </div>
{{- end -}}
